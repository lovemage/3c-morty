付款 / 產生訂單
應用場景
消費者在特店網站購物完成準備結帳時，特店網站呼叫API頁面轉導到綠界建立訂單。
Step 1. 特店：以POST(HTTP Method)呼叫綠界API，並傳送以下參數資料綠界建立訂單，並準備進行付款。
Step 2. 綠界：接受特店參數資料並顯示綠界付款頁。
❗ 注意事項：
使用內置框架iframe可能會導致交易失敗，建議不要使用。
若消費者使用環境為iOS系統時，請勿另開新視窗。詳細說明請參考。
API介接網址
測試環境：https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5
正式環境：https://payment.ecpay.com.tw/Cashier/AioCheckOut/V5
❗ 注意事項：需透過前端網頁導轉(Submit)到綠界付款API網址。

HTTPS 傳輸協定
Content Type ：application/x-www-form-urlencoded
HTTP Method ：POST
特店傳入參數說明(共同參數)
MerchantID String(10)
特店編號 必填

特店編號
測試環境特店編號
正式環境金鑰取得
MerchantTradeNo String(20)
特店訂單編號 必填

特店訂單編號均為唯一值，不可重複使用。
英數字大小寫混合
❗ 注意事項：如何避免訂單編號重複請參考FAQ
MerchantTradeDate String(20)
特店交易時間 必填

格式為：yyyy/MM/dd HH:mm:ss

PaymentType String(20)
交易類型 必填

請固定填入 aio

TotalAmount Int
交易金額 必填

請帶整數，不可有小數點。
僅限新台幣
TradeDesc String(200)
交易描述 必填

請勿帶入特殊字元。

ItemName String(400)
商品名稱 必填

商品名稱
如果商品名稱有多筆，需在金流選擇頁一行一行顯示商品名稱的話，商品名稱請以符號#分隔。
商品名稱字數限制為中英數400字內，超過此限制系統將自動截斷。 詳細的使用注意事項請參考FAQ。
ReturnURL String(200)
付款完成通知回傳網址 必填

ReturnURL 消費者付款完成後，綠界科技會以 Server POST (背景接收)方式傳送付款結果參數到商家的Server。
當消費者付款完成後，綠界會將付款結果參數以幕後回傳到該網址。詳細說明請參考付款結果通知
❗ 注意事項：

請勿設定與Client端接收付款結果網址OrderResultURL相同位置，避免程式判斷錯誤。
ReturnURL收到綠界後端回傳的付款結果通知後，請回應字串1|OK給綠界。
1|OK僅是廠商回應綠界是否收到通知，並不會改變付款狀態。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
ChoosePayment String(20)
選擇預設付款方式 必填

綠界提供下列付款方式：

Credit：信用卡及銀聯卡(需申請開通)
TWQR ：歐付寶TWQR行動支付(需申請開通)
WebATM：網路ATM 
ATM：自動櫃員機
CVS：超商代碼
BARCODE：超商條碼
ApplePay: Apple Pay(僅支援手機支付)
BNPL：裕富無卡分期(需申請開通)
WeiXin：微信支付
ALL：不指定付款方式，由綠界顯示付款方式選擇頁面。
❗ 注意事項：

若為手機版時不支援下列付款方式：WebATM
如需要不透過綠界畫面取得ATM、CVS、BARCODE的繳費代碼，請參考如何不經過綠界畫面取得ATM、CVS、BARCODE的繳費代碼。
當瀏覽器不為Safari時，不會顯示Apple Pay付款功能。
2025/4/1（二）起調整信用卡付款方式，新增 Apple Pay 的同步顯示功能。
若為閘道商時，Credit 同步可支援美國運通卡或國民旅遊卡交易。
CheckMacValue String
檢查碼 必填

請參考檢查碼機制

EncryptType Int
CheckMacValue加密類型 必填

請固定填入1，使用SHA256加密。

StoreID String(10)
特店旗下店舖代號

提供特店填入分店代號使用，僅可用英數字大小寫混合。

ClientBackURL String(200)
Client端返回特店的按鈕連結

消費者點選此按鈕後，會將頁面導回到此設定的網址

❗ 注意事項：

導回時不會帶付款結果到此網址，只是將頁面導回而已。
設定此參數，綠界會在付款完成或取號完成頁面上顯示[返回商店]的按鈕。
設定此參數，發生簡訊OTP驗證失敗時，頁面上會顯示[返回商店]的按鈕。
若未設定此參數，則綠界付款完成頁或取號完成頁面，不會顯示[返回商店]的按鈕。
若導回網址未使用https時，部份瀏覽器可能會出現警告訊息。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
ItemURLString(200)
商品銷售網址

Remark String(100)
備註欄位

ChooseSubPayment String(20)
付款子項目

若設定此參數，建立訂單將轉導至綠界訂單成立頁，依設定的付款方式及付款子項目帶入訂單，無法選擇其他付款子項目。請參考付款方式一覽表

❗ 注意事項：因板信銀行會於每月進行例行維護，當遇銀行維護時，將會建立訂單失敗。

OrderResultURL String(200)
Client端回傳付款結果網址

有別於ReturnURL (server端的網址)，OrderResultURL為商家前端的 URL，用於在消費者完成付款後，接收綠界系統回傳的付款結果參數。消費者付款完成後，綠界會將付款結果參數以POST方式回傳到到該網址。詳細說明請參考付款結果通知。

❗ 注意事項：

若與[ClientBackURL]同時設定，將會以此參數為主。
銀聯卡及非即時交易( ATM、CVS、BARCODE )不支援此參數。
付款結果通知請依ReturnURL (server端的網址)為主,避免因前端操作或網路問題未收到OrderResultURL 特店的client端(前端)的通知。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
NeedExtraPaidInfo String(1)
是否需要額外的付款資訊

額外的付款資訊

若不回傳額外的付款資訊時，參數值請傳：Ｎ；
若要回傳額外的付款資訊時，參數值請傳：Ｙ，付款完成後綠界後端會以POST方式回傳額外付款資訊到特店的ReturnURL 與OrderResultURL。
❗ 注意事項：回傳額外付款資訊參數請參考-額外回傳的參數

IgnorePayment String(100)
隱藏付款方式

當付款方式[ChoosePayment]為ALL時，可隱藏不需要的付款方式，多筆請以井號分隔 (#)。
可用的參數值：

Credit：信用卡
WebATM：網路ATM
ATM：自動櫃員機
CVS：超商代碼
BARCODE：超商條碼
ApplePay: Apple Pay
TWQR ：歐付寶TWQR行動支付
BNPL：裕富無卡分期
WeiXin：微信支付
 
❗ 注意事項：綠界付款方式會不斷增加及調整，為避免因新付款方式造成接收付款結果通知失敗，建議串接時付款方式[ChoosePayment]固定指定付款方式。

PlatformID String(10)
特約合作平台商代號

為專案合作的平台商使用。

CustomField1 String(50)
自訂名稱欄位1

提供廠商使用記錄客製化欄位。

CustomField2 String(50)
自訂名稱欄位2

提供廠商使用記錄客製化欄位。

CustomField3 String(50)
自訂名稱欄位3

提供廠商使用記錄客製化欄位。

CustomField4 String(50)
自訂名稱欄位4

提供廠商使用記錄客製化欄位。

Language String(3)
語系設定

預設語系為中文，若要變更語系參數值請帶：

ENG：英語
KOR：韓語
JPN：日語
CHI：簡體中文

 付款方式 / BARCODE
應用場景
當特店提供消費者在綠界付款頁面使用超商條碼交易時。

Step 1. 特店：將ChoosePayment 選擇預設付款方式設定為BARCODE。
Step 2. 綠界：接受特店訂單並檢核資料。
API介接網址
測試環境：https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5
正式環境：https://payment.ecpay.com.tw/Cashier/AioCheckOut/V5
❗ 注意事項：需透過前端網頁導轉(Submit)到綠界付款API網址。

HTTPS 傳輸協定
Content Type ：application/x-www-form-urlencoded
HTTP Method ：POST
特店傳入參數說明(共同參數)
MerchantID String(10)
特店編號 必填

特店編號
測試環境特店編號
正式環境金鑰取得
MerchantTradeNo String(20)
特店訂單編號 必填

特店訂單編號均為唯一值，不可重複使用。
英數字大小寫混合
❗ 注意事項：如何避免訂單編號重複請參考FAQ
MerchantTradeDate String(20)
特店交易時間 必填

格式為：yyyy/MM/dd HH:mm:ss

PaymentType String(20)
交易類型 必填

請固定填入 aio

TotalAmount Int
交易金額 必填

請帶整數，不可有小數點。
僅限新台幣
TradeDesc String(200)
交易描述 必填

請勿帶入特殊字元。

ItemName String(400)
商品名稱 必填

商品名稱
如果商品名稱有多筆，需在金流選擇頁一行一行顯示商品名稱的話，商品名稱請以符號#分隔。
商品名稱字數限制為中英數400字內，超過此限制系統將自動截斷。 詳細的使用注意事項請參考FAQ。
ReturnURL String(200)
付款完成通知回傳網址 必填

ReturnURL為付款結果通知回傳網址，為特店server或主機的URL，用來接收綠界後端回傳的付款結果通知。
當消費者付款完成後，綠界會將付款結果參數以幕後回傳到該網址。詳細說明請參考付款結果通知
❗ 注意事項：

請勿設定與Client端接收付款結果網址OrderResultURL相同位置，避免程式判斷錯誤。
ReturnURL收到綠界後端回傳的付款結果通知後，請回應字串1|OK給綠界。
1|OK僅是廠商回應綠界是否收到通知，並不會改變付款狀態。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
ChoosePayment String(20)
選擇預設付款方式 必填

綠界提供下列付款方式：

BARCODE：超商條碼
❗ 注意事項：
若為手機版時不支援下列付款方式：WebATM
如需要不透過綠界畫面取得ATM、CVS、BARCODE的繳費代碼，請參考如何不經過綠界畫面取得ATM、CVS、BARCODE的繳費代碼。
當瀏覽器不為Safari時，不會顯示Apple Pay付款功能。
CheckMacValue String
檢查碼 必填

請參考檢查碼機制

EncryptType Int
CheckMacValue加密類型 必填

請固定填入1，使用SHA256加密。

StoreID String(10)
特店旗下店舖代號

提供特店填入分店代號使用，僅可用英數字大小寫混合。

ClientBackURL String(200)
Client端返回特店的按鈕連結

消費者點選此按鈕後，會將頁面導回到此設定的網址

❗ 注意事項：

導回時不會帶付款結果到此網址，只是將頁面導回而已。
設定此參數，綠界會在付款完成或取號完成頁面上顯示[返回商店]的按鈕。
設定此參數，發生簡訊OTP驗證失敗時，頁面上會顯示[返回商店]的按鈕。
若未設定此參數，則綠界付款完成頁或取號完成頁面，不會顯示[返回商店]的按鈕。
若導回網址未使用https時，部份瀏覽器可能會出現警告訊息。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
ItemURLString(200)
商品銷售網址

Remark String(100)
備註欄位

ChooseSubPayment String(20)
付款子項目

若設定此參數，建立訂單將轉導至綠界訂單成立頁，依設定的付款方式及付款子項目帶入訂單，無法選擇其他付款子項目。請參考付款方式一覽表

❗ 注意事項：因板信銀行會於每月進行例行維護，當遇銀行維護時，將會建立訂單失敗。

OrderResultURL String(200)
Client端回傳付款結果網址

有別於ReturnURL (server端的網址)，OrderResultURL為特店的client端(前端)網址。消費者付款完成後，綠界會將付款結果參數以POST方式回傳到到該網址。詳細說明請參考付款結果通知。

❗ 注意事項：

若與[ClientBackURL]同時設定，將會以此參數為主。
銀聯卡及非即時交易( ATM、CVS、BARCODE )不支援此參數。
付款結果通知請依ReturnURL (server端的網址)為主,避免因前端操作或網路問題未收到OrderResultURL 特店的client端(前端)的通知。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
NeedExtraPaidInfo String(1)
是否需要額外的付款資訊

額外的付款資訊

若不回傳額外的付款資訊時，參數值請傳：Ｎ；
若要回傳額外的付款資訊時，參數值請傳：Ｙ，付款完成後綠界後端會以POST方式回傳額外付款資訊到特店的ReturnURL 與OrderResultURL。
❗ 注意事項：回傳額外付款資訊參數請參考-額外回傳的參數

PlatformID String(10)
特約合作平台商代號

為專案合作的平台商使用。

CustomField1 String(50)
自訂名稱欄位1

提供廠商使用記錄客製化欄位。

CustomField2 String(50)
自訂名稱欄位2

提供廠商使用記錄客製化欄位。

CustomField3 String(50)
自訂名稱欄位3

提供廠商使用記錄客製化欄位。

CustomField4 String(50)
自訂名稱欄位4

提供廠商使用記錄客製化欄位。

Language String(3)
語系設定

預設語系為中文，若要變更語系參數值請帶：

ENG：英語
KOR：韓語
JPN：日語
CHI：簡體中文
BARCODE付款參數
StoreExpireDate Int
超商繳費截止時間

若未設定此參數，預設為7天
若需設定最長 30 天，最短1天。
❗ 注意事項：以天為單位，例如7/1號訂單成立，有效天數設為3天，則到期日為7/4 23:59截止。若要設定超過30天時，限特約賣家跟業務提出申請。

PaymentInfoURL String(200)
Server端回傳付款相關資訊

若有設定此參數，訂單建立完成後(非付款完成)，綠界會Server端背景回傳消費者付款方式相關資訊(例：銀行代碼、繳費虛擬帳號繳費期限…等)。請參考ATM、CVS或BARCODE的取號結果通知
❗ 注意事項：

頁面將會停留在綠界，顯示繳費的相關資訊。
回傳只有三段號碼，並不會回傳條碼圖，需自行轉換成code39的三段條碼。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。
ClientRedirectURL String(200)
Client端回傳付款相關資訊

若有設定此參數，訂單建立完成後(非付款完成)，綠界會Client端回傳消費者付款方式相關資訊(例：銀行代碼、繳費虛擬帳號繳費期限…等)且將頁面轉到特店指定的頁面。請參考ATM、CVS或BARCODE的取號結果通知
❗ 注意事項：

若設定此參數，將會使設定的返回特店的按鈕連結[ClientBackURL]失效。
若導回網址未使用https時，部份瀏覽器可能會出現警告訊息。
回傳只有三段號碼，並不會回傳條碼圖，需自行轉換成code39的三段條碼。
參數內容若有包含%26(&)及%3C(<) 這二個值時，請先進行urldecode() 避免呼叫API失敗。

付款 / 取號結果通知
應用場景
Server端方式 (POST) (PaymentInfoURL)
當消費使用ATM/CVS/BARCODE付款方式取號完成後，特店接受綠界的取號結果訊息，並回應接收訊息

Step1.綠界：以ServerPost方式傳送取號結果訊息至特店的Server網址 [PaymentInfoURL]
Step2.特店：收到綠界的取號結果訊息，並判斷檢查碼是否相符
Step3.特店：檢查碼相符後，於網頁端回應1|OK
❗ 注意事項：請勿使用超商代碼販售「遊戲點數(卡)」、「遊戲虛寶」，如經檢舉或稽核屬實，綠界及超商有權限制您的繳費金額或終止使用權益。

Client端方式 (POST) (ClientRedirectURL)
當消費者取號完成後，綠界一次性反饋取號結果通知，並將頁面導至特店自製頁面

Step1.綠界：傳送取號結果並將頁面導至特店的自製頁面網址 (ClientRedirectURL)
Step2.特店：收到綠界的取號結果訊息，並判斷檢查碼是否相符
❗ 注意事項：請勿使用(ClientRedirectURL)通知為付款結果，應使用(PaymentInfoURL)為主要通知內容，避免沒收到訂單取號通知結果。

HTTPS 傳輸協定
Accept ：text/html
Content Type ：application/x-www-form-urlencoded
HTTP Method ：POST
綠界回傳參數說明
MerchantID String(10)
特店編號

測試環境特店編號
正式環境金鑰取得
MerchantTradeNo String(20)
特店訂單編號

訂單產生時傳送給ecpay的特店訂單編號

StoreID String(20)
特店旗下店舖代號

提供特店填入分店代號使用，僅可用英數字大小寫混合

RtnCode Int
交易訊息

ATM 回傳值時為2時，交易狀態為取號成功，其餘為失敗。
CVS/BARCODE回傳值時為10100073時，交易狀態為取號成功，其餘為失敗。
RtnMsg String(200)
交易訊息

TradeNo String(20)
綠界的交易編號

請保存綠界的交易編號與特店交易編號[MerchantTradeNo]的關連。

TradeAmt Int
交易金額

PaymentType String(20)
特店選擇的付款方式

請參考回覆付款方式一覽表

TradeDate String(20)
訂單成立時間

格式為yyyy/MM/dd HH:mm:ss

CustomField1 String(50)
自訂名稱欄位1

提供合作廠商使用記錄用客製化使用欄位

CustomField2 String(50)
自訂名稱欄位2

提供合作廠商使用記錄用客製化使用欄位

CustomField3 String(50)
自訂名稱欄位3

提供合作廠商使用記錄用客製化使用欄位

CustomField4 String(50)
自訂名稱欄位4

提供合作廠商使用記錄用客製化使用欄位

CheckMacValue String
檢查碼

特店必須檢查檢查碼[CheckMacValue]來驗證，請參考附錄檢查碼機制

當ChoosePayment參數為使用ATM付款方式時：

BankCode String(3)
繳費銀行代碼

vAccount String(16)
繳費虛擬帳號

ExpireDate String(100)
繳費期限

格式為yyyy/MM/dd

❗ 注意事項：各銀行ATM繳款帳號，若金額錯誤、逾期繳費、重覆繳款，是經由銀行端機制進行檢核ATM繳款帳號資訊，綠界科技無法進行金額錯誤、逾期繳費、重覆繳款的訂單阻擋。

當ChoosePayment參數為使用CVS或BARCODE付款方式時：

PaymentNo String(14)
繳費代碼

當付款方式為CVS時回傳，若付款方式為BARCODE時回傳空白

ExpireDate String(20)
繳費期限

格式為yyyy/MM/dd HH:mm:ss

Barcode1 String(20)
條碼第一段號碼

如果是代碼，則此欄位回傳空白

Barcode2 String(20)
條碼第二段號碼

如果是代碼，則此欄位回傳空白

Barcode3 String(20)
條碼第三段號碼

如果是代碼，則此欄位回傳空白

特店傳出參數說明
收到綠界回傳結果通知，請回傳1|OK，此訊息僅代表特店回應是否已收到綠界回傳通知，並不會影響訂單的狀態。

❗ 注意事項：

接收取號結果通知時，請系統開發人員確認下面事項，以利收到綠界發送的取號完成通知：
(1) 請確認訂單產生的回傳付款網址[PaymentInfoURL]參數中的程式是否已開發完成。
(2) 請確認回傳付款網址[PaymentInfoURL]中的網址，已經開放對外，從貴公司的網域之外也可以通知得到。
取號結果通知範例：Barcode1=&Barcode2=&Barcode3=&ExpireDate=2017/12/28 00:39:03&MerchantID=2000132&MerchantTradeNo=Test1513787899&PaymentNo=LLL17355880822&PaymentType=CVS_CVS&RtnCode=10100073&RtnMsg=Get CVS Code Succeeded.&TradeAmt=2000&TradeDate=2017/12/21 00:39:03&TradeNo=17122100383415923452&StoreID=&CustomField1=&CustomField2=&CustomField3=&CustomField4=&CheckMacValue=C25373CE6379BB6116FAE8398F4A8E60B71B289D955F6B8A9D9F53FDCC97F571