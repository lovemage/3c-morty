<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>訂單22 - 正確測試環境綠界條碼</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .container { 
            max-width: 600px; 
            margin: 0 auto; 
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button { 
            background: #28a745; 
            color: white; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 5px; 
            font-size: 18px; 
            cursor: pointer; 
            margin: 10px 0;
            width: 100%;
        }
        button:hover { background: #218838; }
        .info { 
            background: #e8f4fd; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 20px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏪 訂單22 - 綠界測試環境條碼付款</h1>
        
        <div class="info">
            <h3>📋 訂單資訊</h3>
            <p><strong>訂單號:</strong> TPA1755504222589022</p>
            <p><strong>金額:</strong> NT$ 30</p>
            <p><strong>商品:</strong> 3C商品一組</p>
            <p><strong>付款方式:</strong> 7-ELEVEN 條碼付款</p>
            <p><strong>環境:</strong> 綠界測試環境 (MerchantID: 2000132)</p>
        </div>

        <div class="warning">
            <h4>🔧 修正說明</h4>
            <p>之前的錯誤是因為使用了正式環境商店ID (3466445) 訪問測試環境。</p>
            <p>現在使用正確的測試環境參數：</p>
            <ul>
                <li>測試商店ID: 2000132</li>
                <li>測試HashKey: 5294y06JbISpM5x9</li>
                <li>重新計算的CheckMacValue</li>
            </ul>
        </div>

        <p><strong>點擊下方按鈕跳轉到綠界測試環境：</strong></p>

        <!-- 修正後的綠界測試環境POST表單 -->
        <form action="https://payment-stage.ecpay.com.tw/Cashier/AioCheckOut/V5" method="POST" target="_blank">
            <input type="hidden" name="MerchantID" value="2000132">
            <input type="hidden" name="MerchantTradeNo" value="TPA1755504222589022">
            <input type="hidden" name="MerchantTradeDate" value="2025/08/18 08:03:42">
            <input type="hidden" name="PaymentType" value="aio">
            <input type="hidden" name="TotalAmount" value="30">
            <input type="hidden" name="TradeDesc" value="7ELEVEN便利店條碼付款">
            <input type="hidden" name="ItemName" value="3C商品一組 - NT$30">
            <input type="hidden" name="ReturnURL" value="https://corba3c-production.up.railway.app/api/third-party/ecpay/callback">
            <input type="hidden" name="ChoosePayment" value="BARCODE">
            <input type="hidden" name="EncryptType" value="1">
            <input type="hidden" name="StoreExpireDate" value="7">
            <input type="hidden" name="PaymentInfoURL" value="https://corba3c-production.up.railway.app/api/third-party/ecpay/payment-info">
            <input type="hidden" name="Desc_1" value="7-ELEVEN">
            <input type="hidden" name="CheckMacValue" value="F6AD9B2BE657F7B5E9C9823822D41500407EF4CF1D601DBEBAC80DFDAEB4AFD6">
            
            <button type="submit">🚀 前往綠界測試環境取得條碼</button>
        </form>

        <div class="info">
            <h3>📱 預期結果</h3>
            <p>使用正確參數後，你應該會看到：</p>
            <ul>
                <li>✅ 成功進入綠界條碼頁面</li>
                <li>📱 顯示三段條碼號碼</li>
                <li>🖼️ 條碼圖片</li>
                <li>💰 金額：NT$ 30</li>
                <li>⏰ 繳費期限：7天</li>
            </ul>
            
            <h4>🛠️ 技術細節</h4>
            <p><strong>CheckMacValue:</strong> F6AD9B2BE657F7B5E9C9823822D41500407EF4CF1D601DBEBAC80DFDAEB4AFD6</p>
            <p><strong>計算方式:</strong> 使用測試環境HashKey + HashIV重新計算</p>
        </div>
    </div>
</body>
</html>